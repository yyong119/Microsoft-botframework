# Microsoft-botframework

QnA bot base on Microsoft botframework.

## QnaMaker of Microsoft Summer Camp Project

QnaMaker knowledge base for Bot Service on Azure.

### API V1.0 Reference

Each published QnA Maker service is exposed as an HTTP endpoint that will take in a question and respond back with the best matched answer and a confidence score. You need the following two GUIDs to access your knowledge base via the HTTP endpoint

Knowledge Base ID: This is auto-generated by the system for every published KB.

Subscription Key: These are assigned per account, and is used for metering. See the subscription keys section for more details.

### Sample Request

```csharp
string responseString = string.Empty;

var query = “hi”; //User Query

var knowledgebaseId = “YOUR_KNOWLEDGE_BASE_ID”; // Use knowledge base id created.

var qnamakerSubscriptionKey = “YOUR_SUBSCRIPTION_KEY”; //Use subscription key assigned to you.

//Build the URI

Uri qnamakerUriBase = new Uri("https://westus.api.cognitive.microsoft.com/qnamaker/v1.0");

var builder = new UriBuilder($"{qnamakerUriBase}/knowledgebases/{knowledgebaseId}/generateAnswer");


//Add the question as part of the body

var postBody = $"{{\"question\": \"{query}\"}}";


//Send the POST request

using (WebClient client = new WebClient()) {

    //Set the encoding to UTF8
    
    client.Encoding = System.Text.Encoding.UTF8;

    //Add the subscription key header
    
    client.Headers.Add("Ocp-Apim-Subscription-Key", qnamakerSubscriptionKey);
    
    client.Headers.Add("Content-Type", "application/json");
    
    responseString = client.UploadString(builder.Uri, postBody);
    
}
```

### Sample Response

```csharp

using Newtonsoft.Json; 

private class QnAMakerResult {

    /// <summary>
    
    /// The top answer found in the QnA Service.
    
    /// </summary>
    
    [JsonProperty(PropertyName = "answer")]
    
    public string Answer { get; set; }

    /// <summary>
    
    /// The score in range [0, 100] corresponding to the top answer found in the QnA Service.
    
    /// </summary>
    
    [JsonProperty(PropertyName = "score")]
    
    public double Score { get; set; }
    
}

//De-serialize the response

QnAMakerResult response;

try {

    response = JsonConvert.DeserializeObject< QnAMakerResult >(responseString);
    
}

catch {

    throw new Exception("Unable to deserialize QnA Maker response string.");
    
}

```